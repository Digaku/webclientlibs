/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
goog.provide("dg.MsgCompiler");
function g(a){throw a;}var i=void 0,j=!0,k=null,n=!1;function o(){return function(){}}var p,aa=aa||{},r=this;function ba(a){for(var a=a.split("."),b=r,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return a!==i}function u(a){return"array"==da(a)}function w(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}function ea(a){return"function"==da(a)}function fa(a){return a[ga]||(a[ga]=++ha)}var ga="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ha=0;function ia(a,b,c){return a.call.apply(a.bind,arguments)}
function ja(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function z(a,b,c){z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return z.apply(k,arguments)}
function ka(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var A=Date.now||function(){return+new Date};function C(a,b){var c=a.split("."),d=r;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&t(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function D(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c}var dg={},la={};
function ma(a){var b=new E;b.append('<div><iframe src="http://player.vimeo.com/video/',soy.$$escapeHtml(a.code),'" width="',soy.$$escapeHtml(a.width),'" height="',soy.$$escapeHtml(a.height),'" frameborder="0"></iframe></div>');return b.toString()}
function na(a){var b=new E;b.append('<div><object width="',soy.$$escapeHtml(a.width),'" height="',soy.$$escapeHtml(a.height),'"><param name="movie" value="http://www.youtube.com/v/',soy.$$escapeHtml(a.code),'?version=3"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"><embed src="http://www.youtube.com/v/',soy.$$escapeHtml(a.code),'?version=3" type="application/x-shockwave-flash" width="',soy.$$escapeHtml(a.width),'" height="',soy.$$escapeHtml(a.height),'" allowscriptaccess="always" allowfullscreen="true"></object></div>');
return b.toString()}function F(a){this.stack=Error().stack||"";a&&(this.message=""+a)}D(F,Error);F.prototype.name="CustomError";function oa(a,b){for(var c=1;c<arguments.length;c++)var d=(""+arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}var pa=/^[a-zA-Z0-9\-_.!~*'()]*$/;function qa(a){a=""+a;return!pa.test(a)?encodeURIComponent(a):a}function ra(a){return decodeURIComponent(a.replace(/\+/g," "))}
function sa(a){if(!ta.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ua,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(va,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(wa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(xa,"&quot;"));return a}var ua=/&/g,va=/</g,wa=/>/g,xa=/\"/g,ta=/[&<>\"]/;function ya(a,b){b.unshift(a);F.call(this,oa.apply(k,b));b.shift()}D(ya,F);ya.prototype.name="AssertionError";function za(a,b){g(new ya("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))}var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
function Ba(a,b){for(var c in a)b.call(i,a[c],c,a)}function Ca(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Da(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ea(a,b,c){b in a||(a[b]=c)}var Fa="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function Ga(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Fa.length;f++)c=Fa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
var G=Array.prototype,Ha=G.indexOf?function(a,b,c){return G.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(y(a))return!y(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ia=G.forEach?function(a,b,c){G.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ja=G.filter?function(a,b,c){return G.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=y(a)?
a.split(""):a,l=0;l<d;l++)if(l in h){var m=h[l];b.call(c,m,l,a)&&(e[f++]=m)}return e},Ka=G.map?function(a,b,c){return G.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Oa=G.some?function(a,b,c){return G.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return j;return n};function Pa(a){return G.concat.apply(G,arguments)}
function Qa(a){if(u(a))return Pa(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Ra(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(u(d)||(e=w(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var f=a.length,h=d.length,l=0;l<h;l++)a[f+l]=d[l];else a.push(d)}}
function Sa(a){for(var b={},c=0,d=0;d<a.length;){var e=a[d++],f=da(e),f="object"==f||"array"==f||"function"==f?"o"+fa(e):(typeof e).charAt(0)+e;Object.prototype.hasOwnProperty.call(b,f)||(b[f]=j,a[c++]=e)}a.length=c}function Ta(a,b){G.sort.call(a,b||Ua)}function Ua(a,b){return a>b?1:a<b?-1:0}var Va="StopIteration"in r?r.StopIteration:Error("StopIteration");function H(){}H.prototype.next=function(){g(Va)};H.prototype.B=function(){return this};
function Wa(a){if(a instanceof H)return a;if("function"==typeof a.B)return a.B(n);if(w(a)){var b=0,c=new H;c.next=function(){for(;;){b>=a.length&&g(Va);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))}function Xa(a,b){if(w(a))try{Ia(a,b,i)}catch(c){c!==Va&&g(c)}else{a=Wa(a);try{for(;;)b.call(i,a.next(),i,a)}catch(d){d!==Va&&g(d)}}}function Ya(a){if(w(a))return u(a)?Pa(a):Qa(a);var a=Wa(a),b=[];Xa(a,function(a){b.push(a)});return b}
function Za(a){if("function"==typeof a.N)return a.N();if(y(a))return a.split("");if(w(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ca(a)}function $a(a){if("function"==typeof a.Y)return a.Y();if("function"!=typeof a.N){if(w(a)||y(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return Da(a)}}function ab(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(w(a)||y(a))Ia(a,b,c);else for(var d=$a(a),e=Za(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}
function I(a,b){this.o={};this.d=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof I?(c=a.Y(),d=a.N()):(c=Da(a),d=Ca(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}p=I.prototype;p.a=0;p.Ba=0;p.N=function(){bb(this);for(var a=[],b=0;b<this.d.length;b++)a.push(this.o[this.d[b]]);return a};p.Y=function(){bb(this);return this.d.concat()};p.w=function(a){return cb(this.o,a)};
p.clear=function(){this.o={};this.Ba=this.a=this.d.length=0};p.remove=function(a){return cb(this.o,a)?(delete this.o[a],this.a--,this.Ba++,this.d.length>2*this.a&&bb(this),j):n};function bb(a){if(a.a!=a.d.length){for(var b=0,c=0;b<a.d.length;){var d=a.d[b];cb(a.o,d)&&(a.d[c++]=d);b++}a.d.length=c}if(a.a!=a.d.length){for(var e={},c=b=0;b<a.d.length;)d=a.d[b],cb(e,d)||(a.d[c++]=d,e[d]=1),b++;a.d.length=c}}p.get=function(a,b){return cb(this.o,a)?this.o[a]:b};
p.set=function(a,b){cb(this.o,a)||(this.a++,this.d.push(a),this.Ba++);this.o[a]=b};p.H=function(){return new I(this)};p.B=function(a){bb(this);var b=0,c=this.d,d=this.o,e=this.Ba,f=this,h=new H;h.next=function(){for(;;){e!=f.Ba&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(Va);var h=c[b++];return a?h:d[h]}};return h};function cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
function db(a,b){var c;a instanceof db?(this.ha(b==k?a.t:b),eb(this,a.G),fb(this,a.Aa),gb(this,a.r),hb(this,a.fa),ib(this,a.p),jb(this,a.u.H()),kb(this,a.M)):a&&(c=(""+a).match(Aa))?(this.ha(!!b),eb(this,c[1]||"",j),fb(this,c[2]||"",j),gb(this,c[3]||"",j),hb(this,c[4]),ib(this,c[5]||"",j),jb(this,c[6]||"",j),kb(this,c[7]||"",j)):(this.ha(!!b),this.u=new lb(k,this,this.t))}p=db.prototype;p.G="";p.Aa="";p.r="";p.fa=k;p.p="";p.M="";p.Uc=n;p.t=n;
p.toString=function(){if(this.m)return this.m;var a=[];this.G&&a.push(pb(this.G,qb),":");this.r&&(a.push("//"),this.Aa&&a.push(pb(this.Aa,qb),"@"),a.push(y(this.r)?encodeURIComponent(this.r):k),this.fa!=k&&a.push(":",""+this.fa));this.p&&(this.r&&"/"!=this.p.charAt(0)&&a.push("/"),a.push(pb(this.p,"/"==this.p.charAt(0)?rb:sb)));var b=""+this.u;b&&a.push("?",b);this.M&&a.push("#",pb(this.M,tb));return this.m=a.join("")};
p.H=function(){var a=this.G,b=this.Aa,c=this.r,d=this.fa,e=this.p,f=this.u.H(),h=this.M,l=new db(k,this.t);a&&eb(l,a);b&&fb(l,b);c&&gb(l,c);d&&hb(l,d);e&&ib(l,e);f&&jb(l,f);h&&kb(l,h);return l};function eb(a,b,c){J(a);delete a.m;a.G=c?b?decodeURIComponent(b):"":b;a.G&&(a.G=a.G.replace(/:$/,""))}function fb(a,b,c){J(a);delete a.m;a.Aa=c?b?decodeURIComponent(b):"":b}function gb(a,b,c){J(a);delete a.m;a.r=c?b?decodeURIComponent(b):"":b}
function hb(a,b){J(a);delete a.m;b?(b=Number(b),(isNaN(b)||0>b)&&g(Error("Bad port number "+b)),a.fa=b):a.fa=k}function ib(a,b,c){J(a);delete a.m;a.p=c?b?decodeURIComponent(b):"":b}function jb(a,b,c){J(a);delete a.m;b instanceof lb?(a.u=b,a.u.za=a,a.u.ha(a.t)):(c||(b=pb(b,ub)),a.u=new lb(b,a,a.t))}function vb(a,b,c){J(a);delete a.m;u(c)||(c=[""+c]);a=a.u;K(a);wb(a);b=M(a,b);if(a.w(b)){var d=a.c.get(b);u(d)?a.a-=d.length:a.a--}0<c.length&&(a.c.set(b,c),a.a+=c.length)}
function kb(a,b,c){J(a);delete a.m;a.M=c?b?decodeURIComponent(b):"":b}function J(a){a.Uc&&g(Error("Tried to modify a read-only Uri"))}p.ha=function(a){this.t=a;this.u&&this.u.ha(a);return this};var xb=/^[a-zA-Z0-9\-_.!~*'():\/;?]*$/;function pb(a,b){var c=k;y(a)&&(c=a,xb.test(c)||(c=encodeURI(a)),0<=c.search(b)&&(c=c.replace(b,yb)));return c}function yb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var qb=/[#\/\?@]/g,sb=/[\#\?:]/g,rb=/[\#\?]/g,ub=/[\#\?@]/g,tb=/#/g;
function lb(a,b,c){this.z=a||k;this.za=b||k;this.t=!!c}function K(a){if(!a.c&&(a.c=new I,a.a=0,a.z))for(var b=a.z.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=k,f=k;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=ra(e);e=M(a,e);a.add(e,f?ra(f):"")}}function zb(a){var b=$a(a);"undefined"==typeof b&&g(Error("Keys are undefined"));a=Za(a);b.length!=a.length&&g(Error("Mismatched lengths for keys/values"));for(var c=new lb(k,i,i),d=0;d<b.length;d++)c.add(b[d],a[d]);return c}p=lb.prototype;
p.c=k;p.a=k;p.add=function(a,b){K(this);wb(this);a=M(this,a);if(this.w(a)){var c=this.c.get(a);u(c)?c.push(b):this.c.set(a,[c,b])}else this.c.set(a,b);this.a++;return this};p.remove=function(a){K(this);a=M(this,a);if(this.c.w(a)){wb(this);var b=this.c.get(a);u(b)?this.a-=b.length:this.a--;return this.c.remove(a)}return n};p.clear=function(){wb(this);this.c&&this.c.clear();this.a=0};p.w=function(a){K(this);a=M(this,a);return this.c.w(a)};
p.Y=function(){K(this);for(var a=this.c.N(),b=this.c.Y(),c=[],d=0;d<b.length;d++){var e=a[d];if(u(e))for(var f=0;f<e.length;f++)c.push(b[d]);else c.push(b[d])}return c};p.N=function(a){K(this);if(a)if(a=M(this,a),this.w(a)){var b=this.c.get(a);if(u(b))return b;a=[];a.push(b)}else a=[];else for(var b=this.c.N(),a=[],c=0;c<b.length;c++){var d=b[c];u(d)?Ra(a,d):a.push(d)}return a};
p.set=function(a,b){K(this);wb(this);a=M(this,a);if(this.w(a)){var c=this.c.get(a);u(c)?this.a-=c.length:this.a--}this.c.set(a,b);this.a++;return this};p.get=function(a,b){K(this);a=M(this,a);if(this.w(a)){var c=this.c.get(a);return u(c)?c[0]:c}return b};
p.toString=function(){if(this.z)return this.z;if(!this.c)return"";for(var a=[],b=0,c=this.c.Y(),d=0;d<c.length;d++){var e=c[d],f=qa(e),e=this.c.get(e);if(u(e))for(var h=0;h<e.length;h++)0<b&&a.push("&"),a.push(f),""!==e[h]&&a.push("=",qa(e[h])),b++;else 0<b&&a.push("&"),a.push(f),""!==e&&a.push("=",qa(e)),b++}return this.z=a.join("")};function wb(a){delete a.Za;delete a.z;a.za&&delete a.za.m}p.H=function(){var a=new lb;this.Za&&(a.Za=this.Za);this.z&&(a.z=this.z);this.c&&(a.c=this.c.H());return a};
function M(a,b){var c=""+b;a.t&&(c=c.toLowerCase());return c}p.ha=function(a){a&&!this.t&&(K(this),wb(this),ab(this.c,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.add(d,a))},this));this.t=a};p.extend=function(a){for(var b=0;b<arguments.length;b++)ab(arguments[b],function(a,b){this.add(b,a)},this)};function Ab(){}function Bb(){}D(Bb,Ab);Bb.prototype.clear=function(){var a=Ya(this.B(j)),b=this;Ia(a,function(a){b.remove(a)})};function Cb(a,b){this.ea=a;this.R=b+"::"}D(Cb,Bb);p=Cb.prototype;
p.ea=k;p.R="";p.set=function(a,b){this.ea.set(this.R+a,b)};p.get=function(a){return this.ea.get(this.R+a)};p.remove=function(a){this.ea.remove(this.R+a)};p.B=function(a){var b=this.ea.B(j),c=new H,d=this;c.next=function(){for(var c=b.next();c.substr(0,d.R.length)!=d.R;)c=b.next();return a?c.substr(d.R.length):d.ea.get(c)};return c};function Db(){}D(Db,Bb);p=Db.prototype;p.ib=function(){try{return!!window.localStorage.getItem}catch(a){}return n};
p.set=function(a,b){try{window.localStorage.setItem(a,b)}catch(c){g("Storage mechanism: Quota exceeded")}};p.get=function(a){a=window.localStorage.getItem(a);if(y(a)||a===k)return a;g("Storage mechanism: Invalid value was encountered")};p.remove=function(a){window.localStorage.removeItem(a)};
p.B=function(a){var b=0,c=new H;c.next=function(){b>=window.localStorage.length&&g(Va);var c=window.localStorage.key(b++);if(a)return c;c=window.localStorage.getItem(c);if(y(c))return c;g("Storage mechanism: Invalid value was encountered")};return c};p.clear=function(){window.localStorage.clear()};var Eb={},Fb,Gb,Hb,Ib;function Jb(){return r.navigator?r.navigator.userAgent:k}Ib=Hb=Gb=Fb=n;var Kb;
if(Kb=Jb()){var Lb=r.navigator;Fb=0==Kb.indexOf("Opera");Gb=!Fb&&-1!=Kb.indexOf("MSIE");Hb=!Fb&&-1!=Kb.indexOf("WebKit");Ib=!Fb&&!Hb&&"Gecko"==Lb.product}var Mb=Fb,N=Gb,O=Ib,Nb=Hb,Ob;a:{var Pb="",Qb;if(Mb&&r.opera)var Rb=r.opera.version,Pb="function"==typeof Rb?Rb():Rb;else if(O?Qb=/rv\:([^\);]+)(\)|;)/:N?Qb=/MSIE\s+([^\);]+)(\)|;)/:Nb&&(Qb=/WebKit\/(\S+)/),Qb)var Sb=Qb.exec(Jb()),Pb=Sb?Sb[1]:"";if(N){var Tb,Ub=r.document;Tb=Ub?Ub.documentMode:i;if(Tb>parseFloat(Pb)){Ob=""+Tb;break a}}Ob=Pb}
var Vb={};
function P(a){var b;if(!(b=Vb[a])){b=0;for(var c=(""+Ob).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",l=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var v=m.exec(h)||["","",""],s=q.exec(l)||["","",""];if(0==v[0].length&&0==s[0].length)break;b=((0==v[1].length?0:parseInt(v[1],10))<(0==s[1].length?0:parseInt(s[1],10))?-1:(0==v[1].length?0:parseInt(v[1],10))>
(0==s[1].length?0:parseInt(s[1],10))?1:0)||((0==v[2].length)<(0==s[2].length)?-1:(0==v[2].length)>(0==s[2].length)?1:0)||(v[2]<s[2]?-1:v[2]>s[2]?1:0)}while(0==b)}b=Vb[a]=0<=b}return b}var Wb={};function Xb(){return Wb[9]||(Wb[9]=N&&document.documentMode&&9<=document.documentMode)}
function Yb(a,b){if(N&&!P(9)){Zb||(Zb=new I);this.g=Zb.get(a);this.g||(b?this.g=document.getElementById(b):(this.g=document.createElement("userdata"),this.g.addBehavior("#default#userData"),document.body.appendChild(this.g)),Zb.set(a,this.g));this.rb=a;try{this.g.load(this.rb)}catch(c){this.g=k}}}D(Yb,Bb);var $b={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},Zb=k;p=Yb.prototype;p.g=k;p.rb=k;
function ac(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return $b[a]})}p.ib=function(){return!!this.g};p.set=function(a,b){this.g.setAttribute(ac(a),b);bc(this)};p.get=function(a){a=this.g.getAttribute(ac(a));if(y(a)||a===k)return a;g("Storage mechanism: Invalid value was encountered")};p.remove=function(a){this.g.removeAttribute(ac(a));bc(this)};
p.B=function(a){var b=0,c=this.g.XMLDocument.documentElement.attributes,d=new H;d.next=function(){b>=c.length&&g(Va);var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(y(d))return d;g("Storage mechanism: Invalid value was encountered")};return d};p.clear=function(){for(var a=this.g.XMLDocument.documentElement,b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);bc(this)};
function bc(a){try{a.g.save(a.rb)}catch(b){g("Storage mechanism: Quota exceeded")}}!N||Xb();!O&&!N||N&&Xb()||O&&P("1.9.1");N&&P("9");function gc(a,b){Ba(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in hc?a.setAttribute(hc[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var hc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function ic(a,b){this.Ea=[];this.Ic=b||k}p=ic.prototype;p.oa=n;p.pa=n;p.va=0;p.Wb=n;p.Fc=n;p.Cc=0;p.xb=function(a,b){jc(this,a,b);this.va--;0==this.va&&this.oa&&kc(this)};function jc(a,b,c){a.oa=j;a.pb=c;a.pa=!b;kc(a)}p.W=function(){this.oa&&(this.Wb||g(new lc),this.Wb=n)};
function mc(a,b,c,d){a.Ea.push([b,c,d]);a.oa&&kc(a)}function nc(a){return Oa(a.Ea,function(a){return ea(a[1])})}
function kc(a){a.sb&&a.oa&&nc(a)&&(r.clearTimeout(a.sb),delete a.sb);a.Q&&(a.Q.Cc--,delete a.Q);for(var b=a.pb,c=n,d=n;a.Ea.length&&0==a.va;){var e=a.Ea.shift(),f=e[0],h=e[1],e=e[2];if(f=a.pa?h:f)try{var l=f.call(e||a.Ic,b);t(l)&&(a.pa=a.pa&&(l==b||l instanceof Error),a.pb=b=l);b instanceof ic&&(d=j,a.va++)}catch(m){b=m,a.pa=j,nc(a)||(c=j)}}a.pb=b;d&&a.va&&(mc(b,z(a.xb,a,j),z(a.xb,a,n)),b.Fc=j);c&&(a.sb=r.setTimeout(function(){t(b.message)&&b.stack&&(b.message+="\n"+b.stack);g(b)},0))}
function lc(){F.call(this)}D(lc,F);lc.prototype.message="Already called";
function oc(a,b){var c=b||{},d=c.document||document,e=document.createElement("SCRIPT"),f={le:e,ka:i},h=new ic(0,f),l=k,m=c.timeout!=k?c.timeout:5E3;0<m&&(l=window.setTimeout(function(){pc(e,j);var b=new qc(rc,"Timeout reached for loading script "+a);h.W();jc(h,n,b)},m),f.ka=l);e.onload=e.onreadystatechange=function(){if(!e.readyState||"loaded"==e.readyState||"complete"==e.readyState)pc(e,c.Gc||n,l),h.W(),jc(h,j,k)};e.onerror=function(){pc(e,j,l);var b=new qc(sc,"Error while loading script "+a);h.W();
jc(h,n,b)};gc(e,{type:"text/javascript",charset:"UTF-8",src:a});tc(d).appendChild(e);return h}function tc(a){var b=a.getElementsByTagName("HEAD");return!b||0==b.length?a.documentElement:b[0]}function pc(a,b,c){c!=k&&r.clearTimeout(c);a.onload=ca;a.onerror=ca;a.onreadystatechange=ca;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var sc=0,rc=1;function qc(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);F.call(this,c);this.code=a}D(qc,F);
function uc(a,b){this.za=new db(a);this.Dc=b?b:"callback";this.ka=5E3}var vc=0;uc.prototype.send=function(a,b,c,d){a=a||k;d=d||"_"+(vc++).toString(36)+A().toString(36);r._callbacks_||(r._callbacks_={});document.createElement("script");var e=this.za.H();if(a)for(var f in a)(!a.hasOwnProperty||a.hasOwnProperty(f))&&vb(e,f,a[f]);b&&(r._callbacks_[d]=wc(d,b),vb(e,this.Dc,"_callbacks_."+d));b=oc(e.toString(),{timeout:this.ka,Gc:j});mc(b,k,xc(d,a,c),i);return{Z:d,Sd:b}};
function xc(a,b,c){return function(){yc(a,n);c&&c(b)}}function wc(a,b){return function(c){yc(a,j);b.apply(i,arguments)}}function yc(a,b){r._callbacks_[a]&&(b?delete r._callbacks_[a]:r._callbacks_[a]=ca)}function zc(){}zc.prototype.Rc=function(a){for(var b=a.length,c=a[0],d=Array((b-c-1)/c||0),e=1+c,f=0,h,l;e<b;){h={};d[f++]=h;for(l=0;l<c;)h[a[++l]]=a[e++]}return d};
function Ac(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))}function Bc(){this.Ja=i}function Cc(a,b){var c=[];Dc(a,b,c);return c.join("")}
function Dc(a,b,c){switch(typeof b){case "string":Ec(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==k){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],Dc(a,a.Ja?a.Ja.call(b,""+f,e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),Ec(f,c),c.push(":"),
Dc(a,a.Ja?a.Ja.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var Fc={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Gc=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Ec(a,b){b.push('"',a.replace(Gc,function(a){if(a in Fc)return Fc[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return Fc[a]=e+b.toString(16)}),'"')}function Hc(a){this.ta=a;this.Qb=new Bc}p=Hc.prototype;p.ta=k;p.Qb=k;p.set=function(a,b){t(b)?this.ta.set(a,Cc(this.Qb,b)):this.ta.remove(a)};p.get=function(a){a=this.ta.get(a);if(a!==k)try{return Ac(a)}catch(b){g("Storage: Invalid value was encountered")}};p.remove=function(a){this.ta.remove(a)};
function Ic(a){Hc.call(this,a)}D(Ic,Hc);function Jc(a){this.data=a}function Kc(a){return!t(a)||a instanceof Jc?a:new Jc(a)}Ic.prototype.set=function(a,b){Ic.h.set.call(this,a,Kc(b))};Ic.prototype.cb=function(a){a=Ic.h.get.call(this,a);if(!t(a)||a instanceof Object)return a;g("Storage: Invalid value was encountered")};Ic.prototype.get=function(a){(a=this.cb(a))?(a=a.data,t(a)||g("Storage: Invalid value was encountered")):a=i;return a};function Q(a){Hc.call(this,a)}D(Q,Ic);
Q.prototype.set=function(a,b,c){if(b=Kc(b)){if(c){if(c<A()){Q.prototype.remove.call(this,a);return}b.expiration=c}b.creation=A()}Q.h.set.call(this,a,b)};Q.prototype.cb=function(a,b){var c=Q.h.cb.call(this,a);if(c){var d;if(d=!b){d=c.creation;var e=c.expiration;d=!!e&&e<A()||!!d&&d>A()}if(d)Q.prototype.remove.call(this,a);else return c}};function Lc(){}var Mc=0;p=Lc.prototype;p.key=0;p.ga=n;p.Ua=n;
p.D=function(a,b,c,d,e,f){ea(a)?this.Gb=j:a&&a.handleEvent&&ea(a.handleEvent)?this.Gb=n:g(Error("Invalid listener argument"));this.sa=a;this.Nb=b;this.src=c;this.type=d;this.capture=!!e;this.fb=f;this.Ua=n;this.key=++Mc;this.ga=n};p.handleEvent=function(a){return this.Gb?this.sa.call(this.fb||this.src,a):this.sa.handleEvent.call(this.sa,a)};!N||Xb();var Nc=!N||Xb(),Oc=N&&!P("8");!Nb||P("528");O&&P("1.9b")||N&&P("8")||Mb&&P("9.5")||Nb&&P("528");!O||P("8");function R(){}R.prototype.zb=n;
R.prototype.I=function(){this.zb||(this.zb=j,this.e())};R.prototype.e=function(){this.Jc&&Pc.apply(k,this.Jc)};function Pc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];w(d)?Pc.apply(k,d):d&&"function"==typeof d.I&&d.I()}}function S(a,b){this.type=a;this.currentTarget=this.target=b}D(S,R);p=S.prototype;p.e=function(){delete this.type;delete this.target;delete this.currentTarget};p.S=n;p.xa=j;p.stopPropagation=function(){this.S=j};p.preventDefault=function(){this.xa=n};
function Qc(a){Qc[" "](a);return a}Qc[" "]=ca;function Rc(a,b){a&&this.D(a,b)}D(Rc,S);p=Rc.prototype;p.target=k;p.relatedTarget=k;p.offsetX=0;p.offsetY=0;p.clientX=0;p.clientY=0;p.screenX=0;p.screenY=0;p.button=0;p.keyCode=0;p.charCode=0;p.ctrlKey=n;p.altKey=n;p.shiftKey=n;p.metaKey=n;p.L=k;
p.D=function(a,b){var c=this.type=a.type;S.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(O){var e;a:{try{Qc(d.nodeName);e=j;break a}catch(f){}e=n}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Nb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=Nb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.L=a;delete this.xa;delete this.S};p.stopPropagation=function(){Rc.h.stopPropagation.call(this);this.L.stopPropagation?this.L.stopPropagation():this.L.cancelBubble=j};
p.preventDefault=function(){Rc.h.preventDefault.call(this);var a=this.L;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,Oc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};p.e=function(){Rc.h.e.call(this);this.relatedTarget=this.currentTarget=this.target=this.L=k};var Sc={},T={},U={},Tc={};
function V(a,b,c,d,e){if(b){if(u(b)){for(var f=0;f<b.length;f++)V(a,b[f],c,d,e);return k}var d=!!d,h=T;b in h||(h[b]={a:0,l:0});h=h[b];d in h||(h[d]={a:0,l:0},h.a++);var h=h[d],l=fa(a),m;h.l++;if(h[l]){m=h[l];for(f=0;f<m.length;f++)if(h=m[f],h.sa==c&&h.fb==e){if(h.ga)break;return m[f].key}}else m=h[l]=[],h.a++;f=Uc();f.src=a;h=new Lc;h.D(c,f,a,b,d,e);c=h.key;f.key=c;m.push(h);Sc[c]=h;U[l]||(U[l]=[]);U[l].push(h);a.addEventListener?(a==r||!a.yb)&&a.addEventListener(b,f,d):a.attachEvent(b in Tc?Tc[b]:
Tc[b]="on"+b,f);return c}g(Error("Invalid event type"))}function Uc(){var a=Vc,b=Nc?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Wc(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Wc(a,b[f],c,d,e);else a=V(a,b,c,d,e),Sc[a].Ua=j}
function Xc(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Xc(a,b[f],c,d,e);else{d=!!d;a:{f=T;if(b in f&&(f=f[b],d in f&&(f=f[d],a=fa(a),f[a]))){a=f[a];break a}a=k}if(a)for(f=0;f<a.length;f++)if(a[f].sa==c&&a[f].capture==d&&a[f].fb==e){Yc(a[f].key);break}}}
function Yc(a){if(!Sc[a])return n;var b=Sc[a];if(b.ga)return n;var c=b.src,d=b.type,e=b.Nb,f=b.capture;c.removeEventListener?(c==r||!c.yb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Tc?Tc[d]:Tc[d]="on"+d,e);c=fa(c);e=T[d][f][c];if(U[c]){var h=U[c],l=Ha(h,b);0<=l&&G.splice.call(h,l,1);0==h.length&&delete U[c]}b.ga=j;e.Lb=j;Zc(d,f,c,e);delete Sc[a];return j}
function Zc(a,b,c,d){if(!d.Ia&&d.Lb){for(var e=0,f=0;e<d.length;e++)d[e].ga?d[e].Nb.src=k:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Lb=n;0==f&&(delete T[a][b][c],T[a][b].a--,0==T[a][b].a&&(delete T[a][b],T[a].a--),0==T[a].a&&delete T[a])}}function $c(a){var b,c=0,d=b==k;b=!!b;if(a==k)Ba(U,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Yc(f.key),c++}});else if(a=fa(a),U[a])for(var a=U[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Yc(f.key),c++}}
function ad(a,b,c,d,e){var f=1,b=fa(b);if(a[b]){a.l--;a=a[b];a.Ia?a.Ia++:a.Ia=1;try{for(var h=a.length,l=0;l<h;l++){var m=a[l];m&&!m.ga&&(f&=bd(m,e)!==n)}}finally{a.Ia--,Zc(c,d,b,a)}}return Boolean(f)}function bd(a,b){var c=a.handleEvent(b);a.Ua&&Yc(a.key);return c}
function Vc(a,b){if(!Sc[a])return j;var c=Sc[a],d=c.type,e=T;if(!(d in e))return j;var e=e[d],f,h;if(!Nc){f=b||ba("window.event");var l=j in e,m=n in e;if(l){if(0>f.keyCode||f.returnValue!=i)return j;a:{var q=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(v){q=j}if(q||f.returnValue==i)f.returnValue=j}}q=new Rc;q.D(f,this);f=j;try{if(l){for(var s=[],L=q.currentTarget;L;L=L.parentNode)s.push(L);h=e[j];h.l=h.a;for(var B=s.length-1;!q.S&&0<=B&&h.l;B--)q.currentTarget=s[B],f&=ad(h,s[B],d,j,q);if(m){h=
e[n];h.l=h.a;for(B=0;!q.S&&B<s.length&&h.l;B++)q.currentTarget=s[B],f&=ad(h,s[B],d,n,q)}}else f=bd(c,q)}finally{s&&(s.length=0),q.I()}return f}d=new Rc(b,this);try{f=bd(c,d)}finally{d.I()}return f}function cd(){}D(cd,R);p=cd.prototype;p.yb=j;p.ob=k;p.addEventListener=function(a,b,c,d){V(this,a,b,c,d)};p.removeEventListener=function(a,b,c,d){Xc(this,a,b,c,d)};
p.dispatchEvent=function(a){var b=a.type||a,c=T;if(b in c){if(y(a))a=new S(a,this);else if(a instanceof S)a.target=a.target||this;else{var d=a,a=new S(b,this);Ga(a,d)}var d=1,e,c=c[b],b=j in c,f;if(b){e=[];for(f=this;f;f=f.ob)e.push(f);f=c[j];f.l=f.a;for(var h=e.length-1;!a.S&&0<=h&&f.l;h--)a.currentTarget=e[h],d&=ad(f,e[h],a.type,j,a)&&a.xa!=n}if(n in c)if(f=c[n],f.l=f.a,b)for(h=0;!a.S&&h<e.length&&f.l;h++)a.currentTarget=e[h],d&=ad(f,e[h],a.type,n,a)&&a.xa!=n;else for(e=this;!a.S&&e&&f.l;e=e.ob)a.currentTarget=
e,d&=ad(f,e,a.type,n,a)&&a.xa!=n;a=Boolean(d)}else a=j;return a};p.e=function(){cd.h.e.call(this);$c(this);this.ob=k};function dd(a,b){this.i=a||1;this.ya=b||ed;this.Sa=z(this.sd,this);this.kb=A()}D(dd,cd);dd.prototype.enabled=n;var ed=r.window;p=dd.prototype;p.f=k;p.setInterval=function(a){this.i=a;this.f&&this.enabled?(this.stop(),this.start()):this.f&&this.stop()};
p.sd=function(){if(this.enabled){var a=A()-this.kb;0<a&&a<0.8*this.i?this.f=this.ya.setTimeout(this.Sa,this.i-a):(this.dispatchEvent(fd),this.enabled&&(this.f=this.ya.setTimeout(this.Sa,this.i),this.kb=A()))}};p.start=function(){this.enabled=j;this.f||(this.f=this.ya.setTimeout(this.Sa,this.i),this.kb=A())};p.stop=function(){this.enabled=n;this.f&&(this.ya.clearTimeout(this.f),this.f=k)};p.e=function(){dd.h.e.call(this);this.stop();delete this.ya};var fd="tick";function gd(){}gd.prototype.Da=k;var hd;
function id(){}D(id,gd);function jd(a){return(a=kd(a))?new ActiveXObject(a):new XMLHttpRequest}function md(a){var b={};kd(a)&&(b[0]=j,b[1]=j);return b}id.prototype.gb=k;
function kd(a){if(!a.gb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.gb=d}catch(e){}}g(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.gb}hd=new id;function nd(a){return od(a||arguments.callee.caller,[])}
function od(a,b){var c=[];if(0<=Ha(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pd(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=pd(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(od(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pd(a){if(qd[a])return qd[a];a=""+a;if(!qd[a]){var b=/function ([^\(]+)/.exec(a);qd[a]=b?b[1]:"[Anonymous]"}return qd[a]}var qd={};function rd(a,b,c,d,e){this.reset(a,b,c,d,e)}rd.prototype.Bb=k;rd.prototype.Ab=k;var sd=0;rd.prototype.reset=function(a,b,c,d,e){"number"==typeof e||sd++;d||A();this.ra=a;this.Zc=b;delete this.Bb;delete this.Ab};rd.prototype.Tb=function(a){this.ra=a};function td(a){this.$c=a}td.prototype.Q=k;
td.prototype.ra=k;td.prototype.Wa=k;td.prototype.Db=k;function ud(a,b){this.name=a;this.value=b}ud.prototype.toString=function(){return this.name};var vd=new ud("SEVERE",1E3),wd=new ud("WARNING",900),xd=new ud("CONFIG",700),yd=new ud("FINE",500);p=td.prototype;p.getParent=function(){return this.Q};p.Tb=function(a){this.ra=a};function zd(a){if(a.ra)return a.ra;if(a.Q)return zd(a.Q);za("Root logger has no level set.");return k}
p.log=function(a,b,c){if(a.value>=zd(this).value){a=this.Oc(a,b,c);b="log:"+a.Zc;r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b));r.msWriteProfilerMark&&r.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Db)for(var e=0,f=i;f=c.Db[e];e++)f(d);b=b.getParent()}}};
p.Oc=function(a,b,c){var d=new rd(a,""+b,this.$c);if(c){d.Bb=c;var e;var f=arguments.callee.caller;try{var h;var l=ba("window.location.href");if(y(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:l,stack:"Not available"};else{var m,q,v=n;try{m=c.lineNumber||c.Zd||"Not available"}catch(s){m="Not available",v=j}try{q=c.fileName||c.filename||c.sourceURL||l}catch(L){q="Not available",v=j}h=v||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:m,fileName:q,
stack:c.stack||"Not available"}:c}e="Message: "+sa(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+sa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+sa(nd(f)+"-> ")}catch(B){e="Exception trying to expose exception! You win, we lose. "+B}d.Ab=e}return d};p.config=function(a,b){this.log(xd,a,b)};function W(a,b){a.log(yd,b,i)}var Ad={},Bd=k;
function Cd(a){Bd||(Bd=new td(""),Ad[""]=Bd,Bd.Tb(xd));var b;if(!(b=Ad[a])){b=new td(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Cd(a.substr(0,c));c.Wa||(c.Wa={});c.Wa[d]=b;b.Q=c;Ad[a]=b}return b}function Dd(a){this.headers=new I;this.la=a||k}D(Dd,cd);Dd.prototype.j=Cd("goog.net.XhrIo");var Ed=/^https?$/i,Fd=[];function Gd(a,b,c,d){var e=new Dd;Fd.push(e);b&&V(e,"complete",b);V(e,"ready",ka(Hd,e));e.send(a,c,d,i)}function Hd(a){a.I();a=Ha(Fd,a);0<=a&&G.splice.call(Fd,a,1)}p=Dd.prototype;p.C=n;
p.b=k;p.Ma=k;p.jb="";p.Ib="";p.A=0;p.F="";p.bb=n;p.Ga=n;p.hb=n;p.P=n;p.ja=0;p.T=k;p.Pb="";p.xd=n;
p.send=function(a,b,c,d){this.b&&g(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.jb=a;this.F="";this.A=0;this.Ib=b;this.bb=n;this.C=j;this.b=this.la?jd(this.la):jd(hd);this.Ma=this.la?this.la.Da||(this.la.Da=md(this.la)):hd.Da||(hd.Da=md(hd));this.b.onreadystatechange=z(this.Mb,this);try{W(this.j,X(this,"Opening Xhr")),this.hb=j,this.b.open(b,a,j),this.hb=n}catch(e){W(this.j,X(this,"Error opening Xhr: "+e.message));Id(this,e);return}var a=c||"",f=
this.headers.H();d&&ab(d,function(a,b){f.set(b,a)});"POST"==b&&!f.w("Content-Type")&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");ab(f,function(a,b){this.b.setRequestHeader(b,a)},this);this.Pb&&(this.b.responseType=this.Pb);"withCredentials"in this.b&&(this.b.withCredentials=this.xd);try{this.T&&(ed.clearTimeout(this.T),this.T=k),0<this.ja&&(W(this.j,X(this,"Will abort after "+this.ja+"ms if incomplete")),this.T=ed.setTimeout(z(this.ka,this),this.ja)),W(this.j,X(this,"Sending request")),
this.Ga=j,this.b.send(a),this.Ga=n}catch(h){W(this.j,X(this,"Send error: "+h.message)),Id(this,h)}};p.ka=function(){"undefined"!=typeof aa&&this.b&&(this.F="Timed out after "+this.ja+"ms, aborting",this.A=8,W(this.j,X(this,this.F)),this.dispatchEvent("timeout"),this.abort(8))};function Id(a,b){a.C=n;a.b&&(a.P=j,a.b.abort(),a.P=n);a.F=b;a.A=5;Jd(a);Kd(a)}function Jd(a){a.bb||(a.bb=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
p.abort=function(a){this.b&&this.C&&(W(this.j,X(this,"Aborting")),this.C=n,this.P=j,this.b.abort(),this.P=n,this.A=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Kd(this))};p.e=function(){this.b&&(this.C&&(this.C=n,this.P=j,this.b.abort(),this.P=n),Kd(this,j));Dd.h.e.call(this)};p.Mb=function(){!this.hb&&!this.Ga&&!this.P?this.gd():Ld(this)};p.gd=function(){Ld(this)};
function Ld(a){if(a.C&&"undefined"!=typeof aa)if(a.Ma[1]&&4==Md(a)&&2==Nd(a))W(a.j,X(a,"Local request error detected and ignored"));else if(a.Ga&&4==Md(a))ed.setTimeout(z(a.Mb,a),0);else if(a.dispatchEvent("readystatechange"),4==Md(a)){W(a.j,X(a,"Request complete"));a.C=n;if(Od(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.A=6;var b;try{b=2<Md(a)?a.b.statusText:""}catch(c){W(a.j,"Can not get status: "+c.message),b=""}a.F=b+" ["+Nd(a)+"]";Jd(a)}Kd(a)}}
function Kd(a,b){if(a.b){var c=a.b,d=a.Ma[0]?ca:k;a.b=k;a.Ma=k;a.T&&(ed.clearTimeout(a.T),a.T=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.j.log(vd,"Problem encountered resetting onreadystatechange: "+e.message,i)}}}p.Ha=function(){return!!this.b};
function Od(a){var b=Nd(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:c=j;break a;default:c=n}if(!c){if(b=0===b)a=(""+a.jb).match(Aa)[1]||k,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Ed.test(a?a.toLowerCase():"");c=b}return c}function Md(a){return a.b?a.b.readyState:0}function Nd(a){try{return 2<Md(a)?a.b.status:-1}catch(b){return a.j.log(wd,"Can not get status: "+b.message,i),-1}}
function Pd(a){try{return a.b?a.b.responseText:""}catch(b){return W(a.j,"Can not get responseText: "+b.message),""}}function Qd(a){if(a.b)return Ac(a.b.responseText)}function Rd(a){return y(a.F)?a.F:""+a.F}function X(a,b){return b+" ["+a.Ib+" "+a.jb+" "+Nd(a)+"]"}var Sd,Y={};C("dg.utils",Y);Y.Lc=function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")};
Y.preventDefault=function(a){a.preventDefault!=k?a.preventDefault():a.stop!=k&&a.stop();a.returnValue=n;a.stopPropagation!=k&&a.stopPropagation();return k};Y.ld=function(a){var b,c,d,e,f;c=a.split("?");a=c[0];d={};if(1<c.length){c=c[1].split("&");for(e=0,f=c.length;e<f;e++)b=c[e],b=b.split(":"),d[b[0]]=b[1]}c=a.split("/").slice(-1);return{path:a,tail:c,query:d}};Y.rd=function(){return window.localStorage!=k};
Y.td=function(a){var b;b=new Date;a=(new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds())).getTime()-1E3*parseInt(a);if(6E4>a)return a=Math.round(a/1E3),2>a?dg.lang.Yd():dg.lang.ne({me:a});if(36E5>a)return a=Math.round(a/6E4),2>a?dg.lang.he():dg.lang.ae({$d:a});if(864E5>a)return a=Math.round(a/36E5),2>a?dg.lang.ge():dg.lang.Xd({Wd:a});return 2592E6>a?(a=Math.round(a/864E5),2>a?dg.lang.ve():dg.lang.Rd({Qd:a})):31536E6>a?dg.lang.ce({be:Math.round(a/
2592E6)}):dg.lang.ue({te:Math.round(a/31536E6)})};Y.Xb=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};Y.eb=function(){var a;a=Y.Xb;return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};Y.Pc=function(a,b){return 100*(b-Math.ceil(60*Math.pow(2,a/4)-60))/(60*Math.pow(2,(a+1)/4)-60*Math.pow(2,a/4))};
Sd={Fb:n,Eb:n,D:function(){var a;if(!this.Fb){this.cd=digaku.baseurl+"/media/mt_notif.mp3";this.dd=digaku.baseurl+"/media/mt_notif.ogg";try{if((a=document.createElement("audio"))&&a.canPlayType&&a.canPlayType("audio/mpeg"))this.Eb=j}catch(b){}return this.Fb=j}}};Y.Qa=j;
Y.md=function(){var a;if(!(Y.Qa===n||digaku.session.user.settings.notif_sound===n))return Y.Qa=n,Sd.D(),0<$("#sounder").length&&$("#sounder").remove(),a=k,Sd.Eb?(a=$('<audio id="#sounder" autoplay="autoplay" preload="auto"></audio>'),a.append('<source src="'+Sd.cd+'" />')):(a=$('<audio id="#sounder" autoplay="autoplay" preload="auto"></audio>'),a.append('<source src="'+Sd.dd+'" />')),a&&(Eb.product.Ed?a.load():$("body").append(a)),setTimeout(function(){return Y.Qa=j},5E3)};
Y.Qc=function(a){var b=a.search(/\.\w+$/),a=-1<b?[a.slice(0,b),a.slice(b)]:[a,k];return a[0]+(digaku.config.debug===j?"":".min")+a[1]};Y.wc=function(a){a.q("http")&&(a=a.slice(digaku.baseurl.length));if(digaku.hash_static[a]!=k)return digaku.hash_static[a]};
Y.Xc=function(a,b){var c,d,e;c=document.createElement("script");a.q("http://")?c.src=b?a+"?uid="+digaku.session.user.id+"&uname="+digaku.session.user.name:a:(e=digaku.baseurl+a,d=Y.wc(e),e=Y.Qc(e),c.language="javascript",c.type="text/javascript",c.src=b?e+"?uid="+digaku.session.user.id+"&uname="+digaku.session.user.name+"&h="+d:e+"?h="+d);return document.getElementsByTagName("HEAD").item(0).appendChild(c)};
Y.Sc=function(a){var b;b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=a;b.media="all";return document.getElementsByTagName("head")[0].appendChild(b)};Y.Wc=function(a,b,c,d,e){d==k&&(d=6E4);e==k&&(e=k);a=new uc(a);a.ka=d;a.send(b,function(a){return a.error?k:c(a)},k,e?e:k);return a};
Y.yc=function(a,b,c){c.onError||(c.onError=o());c.show_loading===j&&dg.ui.ia(j);return Gd(a,function(a){var b;c.show_loading===j&&dg.ui.ia(n);b=k;try{b=Qd(a.target)}catch(f){log.error(f);try{c.onError&&c.onError.call(this,b,f)}catch(h){log.error(h)}try{c.cleanUp&&c.cleanUp.call(this)}catch(l){log.error(l)}c.silent!==j&&dg.ui.Kb(dg.lang.Pd());return}if(b!==k)if(b.error){try{c.cleanUp&&c.cleanUp.call(this)}catch(m){log.error(m)}c.silent!==j&&dg.ui.Kb(b.error);c.onError.call(this,b,k)}else c.onComplete&&
c.onComplete.call(this,b),c.cleanUp&&c.cleanUp.call(this)},"POST",zb(new I(b)).toString())};Y.xc=function(a,b,c){return Gd(a,function(a){a=Qd(a.target);if(a!=k){if(a.error!=k)return dg.ui.Kb(a.error);c.onComplete.call(this,a)}},"GET",zb((new I(b)).toString()).toString())};
Y.Ub=function(a,b){var c,d,e,f;b==k&&(b={});Ea(b,"attrs",[]);e=k;try{e=new db(a)}catch(h){return log.error("Malformed url: "+a),a.slice(0,60)+"..."}f=function(a,b){return a.r+b};if(60>=a.length)return-1<b.attrs.indexOf("fragment")&&e.M?e.r+e.p+"#"+e.M:e.r+e.p;d=f(e,e.p);if(60>=d.length)return d;c=e.p;c=c.slice(0,d.length-60)+"/...";d=f(e,c);return 60>=d.length?d:f(e,"/...")};Y.La={};
Y.Ud=function(a){var b;a==k&&(a="digaku");if(Y.La[a])return Y.La[a];b=new Db;if(!(b=b.ib()?a?new Cb(b,a):b:k))b=new Yb(a||"UserDataSharedStore"),b=b.ib()?b:k;return b?(Y.La[a]=new Q(b),Y.La[a]):k};Y.Vc=function(a){return(new zc).Rc(a)};C("dg.utils.escapeHtml",Y.Lc);C("dg.utils.preventDefault",Y.preventDefault);C("dg.utils.parse_hqs",Y.ld);C("dg.utils.supportLocalStorage",Y.rd);C("dg.utils.timestampToAge",Y.td);C("dg.utils.uid",Y.Xb);C("dg.utils.guid",Y.eb);C("dg.utils.getPercent",Y.Pc);
C("dg.utils.playNotif",Y.md);C("dg.utils.loadJS",Y.Xc);C("dg.utils.includeCss",Y.Sc);C("dg.utils.ajaxJsonPost",Y.yc);C("dg.utils.ajaxJsonGet",Y.xc);C("dg.utils.shortUrl",Y.Ub);C("dg.utils.jsonp",Y.Wc);C("dg.utils.jsonhUnpack",Y.Vc);
var Td={Hc:function(){function a(a,b){return"~E"+b.charCodeAt(0)+"E"}function b(b,c,d){c="(["+c.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(c="\\\\"+c);return b=b.replace(RegExp(c,"g"),a)}function c(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b){for(var c=b,d=4-c.length%4,e=0;e<d;e++)c+=" ";return c});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")}function d(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")}function e(a){return a=
a.replace(/~E(\d+)E/g,function(a,b){return String.fromCharCode(parseInt(b))})}function f(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}],a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a)var c=Math.random(),a=0.9<c?b[2](a):0.45<c?b[1](a):b[0](a);return a});return a=('<a href="'+a+'">'+a+"</a>").replace(/">.+:/g,
'">')}function h(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return f(e(b))})}function l(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}function m(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");
c=cc(c);c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return s("<blockquote>\n"+c+"\n</blockquote>")})}function q(a){a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=b(a,"*_{}[]\\",n)}function v(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=q(a);return b+"<code>"+a+"</code>"})}function s(a){a=a.replace(/(^\n+|\n+$)/g,
"");return"\n\n~K"+(mb.push(a)-1)+"K\n\n"}function L(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,e){a=q(d(b));a=c(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return s("<pre><code>"+a+"\n</code></pre>")+e});return a=a.replace(/~0/,"")}function B(a){var a=a+"~0",b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;dc?a=a.replace(b,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,
"\n\n\n");a=ec(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=ec(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")}function La(a){function b(a){return a.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLowerCase()}a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,
function(a,c){return s('<h1 id="'+b(c)+'">'+Ma(c)+'&nbsp;<a class="headerlink" href="#'+soy.$$escapeHtml(b(c))+'" title="Permalink to this headline">&para;</a></h1>')});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return s('<h2 id="'+b(c)+'">'+Ma(c)+'&nbsp;<a class="headerlink" href="#'+soy.$$escapeHtml(b(c))+'" title="Permalink to this headline">&para;</a></h2>')});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){a=c.length;return s("<h"+a+' id="'+b(d)+'">'+Ma(d)+
"</h"+a+">")})}function fc(a,c,d,e,f,h,l,m){m==i&&(m="");a=e.toLowerCase();if(""==f)if(""==a&&(a=d.toLowerCase().replace(/ ?\n/g," ")),nb[a]!=i)f=nb[a],ob[a]!=i&&(m=ob[a]);else if(-1<c.search(/\(\s*\)$/m))f="";else return c;f=b(f,"*_");c='<a href="'+f+'"';""!=m&&(m=m.replace(/"/g,"&quot;"),m=b(m,"*_"),c+=' title="'+m+'"');return c+(">"+d+"</a>")}function we(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=
b(a,"\\`*_")})}function Ma(b){b=v(b);b=we(b);b=b.replace(/\\(\\)/g,a);b=b.replace(/\\([`*_{}\[\]()>#+-.!])/g,a);b=b.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,fc);b=b.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,fc);b=b.replace(/(\[([^\[\]]+)\])()()()()()/g,fc);b=h(b);b=l(b);b=b.replace(/(\*\*)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");b=b.replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return b=b.replace(/  +\n/g,
" <br />\n")}function cc(a){for(var a=La(a),b=s("<hr />"),a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=B(a),a=L(a),a=m(a),a=ld(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),c=a.split(/\n{1,}/g),a=[],b=c.length,d=0;d<b;d++){var e=c[d];0<=e.search(/~K(\d+)K/g)?a.push(e):0<=e.search(/\S/)&&(e=Ma(e),e=e.replace(/^([ \t]*)/g,"<p>"),e+="</p>",a.push(e))}b=a.length;for(d=0;d<b;d++)for(;0<=
a[d].search(/~K(\d+)K/);)c=mb[RegExp.$1],c=c.replace(/\$/g,"$$$$"),a[d]=a[d].replace(/~K\d+K/,c);return a=a.join("\n\n")}function Na(a,b){var c;c=b.replace(/\n\n/g,"\n");c=c.replace(/^\n/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+(mb.push(c)-1)+"K\n\n"}function ld(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,Na);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,
Na);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,Na);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,Na);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,Na);return a=a.replace(/\n\n/g,"\n")}function xe(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(a,b,c,d,e){b=b.toLowerCase();nb[b]=l(c);if(d)return d+e;e&&(ob[b]=e.replace(/"/g,"&quot;"));return""})}var nb,
ob,mb,dc=0;this.Yc=function(a){nb=[];ob=[];mb=[];a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=c("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=ld(a);a=xe(a);a=cc(a);a=e(a);a=a.replace(/~D/g,"$$");return a=a.replace(/~T/g,"~")};var ec;ec=function(a){dc++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,e,f){a=f;b||-1<a.search(/\n{2,}/)?a=cc(d(a)):
(a=B(d(a)),a=a.replace(/\n$/,""),a=Ma(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");dc--;return a}}};"undefined"!=typeof exports&&(exports.Kd=Td);C("Showdown",Td);function Ud(a,b,c){this.ba=a;this.i=b||0;this.O=c;this.Ec=z(this.Kc,this)}D(Ud,R);p=Ud.prototype;p.Z=0;p.e=function(){Ud.h.e.call(this);this.stop();delete this.ba;delete this.O};
p.start=function(a){this.stop();var b=this.Ec,a=t(a)?a:this.i;ea(b)||(b&&"function"==typeof b.handleEvent?b=z(b.handleEvent,b):g(Error("Invalid listener argument")));this.Z=2147483647<a?-1:ed.setTimeout(b,a||0)};p.stop=function(){this.Ha()&&ed.clearTimeout(this.Z);this.Z=0};p.Ha=function(){return 0!=this.Z};p.Kc=function(){this.Z=0;this.ba&&this.ba.call(this.O)};function Vd(a,b){this.ba=a;this.O=b;this.X=new Ud(z(this.jd,this),0,this)}D(Vd,R);p=Vd.prototype;p.i=0;p.qb=0;
p.e=function(){this.X.I();delete this.ba;delete this.O;Vd.h.e.call(this)};p.start=function(a,b){this.stop();var c=b||0;this.i=Math.max(a||0,0);this.qb=0>c?-1:A()+c;this.X.start(0>c?this.i:Math.min(this.i,c))};p.stop=function(){this.X.stop()};p.Ha=function(){return this.X.Ha()};p.nb=o();p.jd=function(){if(this.ba.call(this.O))this.nb();else if(0>this.qb)this.X.start(this.i);else{var a=this.qb-A();0>=a||this.X.start(Math.min(this.i,a))}};function Wd(a){this.O=a;this.d=[]}D(Wd,R);var Xd=[];
function Yd(a,b,c,d){u(c)||(Xd[0]=c,c=Xd);for(var e=0;e<c.length;e++)a.d.push(V(b,c[e],d||a,n,a.O||a))}Wd.prototype.e=function(){Wd.h.e.call(this);Ia(this.d,Yc);this.d.length=0};Wd.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Zd(a){S.call(this,"navigate");this.vd=a}D(Zd,S);
function $d(a,b,c,d){a&&!b&&g(Error("Can't use invisible history without providing a blank page."));var e;c?e=c:(e="history_state"+ae,document.write(oa(be,e,e)),e=y(e)?document.getElementById(e):e);this.qa=e;this.v=c?(9==c.nodeType?c:c.ownerDocument||c.document)?(9==c.nodeType?c:c.ownerDocument||c.document).parentWindow||(9==c.nodeType?c:c.ownerDocument||c.document).defaultView:window:window;this.Bc=this.v.location.href.split("#")[0];this.Fa=b;N&&!b&&(this.Fa="https"==window.location.protocol?"https:///":
'javascript:""');this.f=new dd(ce);this.U=!a;this.K=new Wd(this);if(a||N&&!de)d?a=d:(a="history_iframe"+ae,b=this.Fa?'src="'+sa(this.Fa)+'"':"",document.write(oa(ee,a,b)),a=y(a)?document.getElementById(a):a),this.$=a,this.Yb=j;N&&!de&&(Yd(this.K,this.v,"load",this.ed),this.Vb=this.$a=n);this.U?fe(this,this.s(),j):ge(this,this.qa.value);ae++}D($d,cd);$d.prototype.na=n;$d.prototype.da=n;$d.prototype.aa=k;var de=N&&8<=document.documentMode||O&&P("1.9.2")||Nb&&P("532.1");p=$d.prototype;p.ca=k;
p.e=function(){$d.h.e.call(this);this.K.I();he(this,n)};function he(a,b){if(b!=a.na)if(N&&!de&&!a.$a)a.Vb=b;else if(b)if(Mb?Yd(a.K,a.v.document,ie,a.kd):O&&Yd(a.K,a.v,"pageshow",a.hd),de&&a.U)Yd(a.K,a.v,"hashchange",a.fd),a.na=j,a.dispatchEvent(new Zd(a.s()));else{if(!N||a.$a)Yd(a.K,a.f,fd,z(a.W,a,j)),a.na=j,N||(a.aa=a.s()),a.f.start(),a.dispatchEvent(new Zd(a.s()))}else{a.na=n;var c=a.K;Ia(c.d,Yc);c.d.length=0;a.f.stop()}}
p.ed=function(){this.$a=j;this.qa.value&&ge(this,this.qa.value,j);he(this,this.Vb)};p.hd=function(a){a.L.persisted&&(he(this,n),he(this,j))};p.fd=function(){var a=je(this.v);a!=this.aa&&ke(this,a)};p.s=function(){return this.ca!=k?this.ca:this.U?je(this.v):le(this)||""};p.Ka=function(a,b){this.s()!=a&&(this.U?(fe(this,a,n),de||N&&ge(this,a,n,b),this.na&&this.W(n)):(ge(this,a,n),this.ca=this.aa=this.qa.value=a,this.dispatchEvent(new Zd(a))))};
function je(a){var a=a.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)}function fe(a,b,c){var d=a.v.location,a=a.Bc,e=-1!=d.href.indexOf("#");if(N||e||b)a+="#"+b;a!=d.href&&(c?d.replace(a):d.href=a)}function ge(a,b,c,d){if(a.Yb||b!=le(a))if(a.Yb=n,b=qa(b),N){var e=a.$.contentDocument||a.$.contentWindow.document;e.open("text/html",c?"replace":i);e.write(oa(me,sa(d||a.v.document.title),b));e.close()}else if(b=a.Fa+"#"+b,a=a.$.contentWindow)c?a.location.replace(b):a.location.href=b}
function le(a){if(N)return a=a.$.contentDocument||a.$.contentWindow.document,a.body?ra(a.body.innerHTML):k;var b=a.$.contentWindow;if(b){var c;try{c=ra(je(b))}catch(d){return a.da||(a.da!=j&&a.f.setInterval(ne),a.da=j),k}a.da&&(a.da!=n&&a.f.setInterval(ce),a.da=n);return c||k}return k}p.W=function(){if(this.U){var a=je(this.v);a!=this.aa&&ke(this,a)}if(!this.U||N&&!de)if(a=le(this)||"",this.ca==k||a==this.ca)this.ca=k,a!=this.aa&&ke(this,a)};
function ke(a,b){a.aa=a.qa.value=b;a.U?(N&&!de&&ge(a,b),fe(a,b)):ge(a,b);a.dispatchEvent(new Zd(a.s()))}p.kd=function(){this.f.stop();this.f.start()};var ie=["mousedown","keydown","mousemove"],me="<title>%s</title><body>%s</body>",ee='<iframe id="%s" style="display:none" %s></iframe>',be='<input type="text" name="%s" id="%s" style="display:none">',ae=0,ce=150,ne=1E4,oe,pe,qe,digaku={};C("digaku",digaku);pe=function(){this.wa=n;this.Va=this.ma=0;return this.mb=n};D(pe,cd);
pe.prototype.onReady=function(a,b){var c,d;b||(b=this);d=this;c=new Vd(function(){return d.mb===n});c.nb=function(){var c,f;d.mb=j;f=a;d.Va+=1;c=d.Va+1;-1<c&&(f=function(){var f;if(0===d.ma)d.ma=c+1,a.call(b);else return f=new Vd(function(){log.debug("callback_index: "+d.ma+", wanted: "+c);return d.ma===c}),f.nb=function(){d.ma=c+1;return a.call(b)},f.start(200,3E4)});d.wa===j?f.call(d):Wc(d,"ready",f,k,d);d.mb=n};c.start(200,3E4)};
pe.prototype.triggerReady=function(){var a;this.wa=j;a=this;return setTimeout(function(){return a.dispatchEvent(new oe)},1)};digaku.pc=function(){function a(a,c){this.wa=a!=k?a:n;this.wb=c!=k?c:[]}a.prototype.onReady=function(a,c){c||(c=this);this.wa===j?a.call(c):this.wb.push(a)};a.prototype.triggerReady=function(a){var c,d,e,f;this.wa=j;a||(a=this);f=this.wb;for(d=0,e=f.length;d<e;d++)c=f[d],c.call(a)};return a}();C("digaku.DeferedOrderCallback",digaku.pc);oe=function(){return this.type="ready"};
D(oe,S);C("DgEventTarget",pe);C("DgEventReady",oe);
digaku.D=function(a,b,c,d){c==k&&(c={});d==k&&(d=k);this.global={original_title:document.title};this.baseurl||(this.baseurl=a);this.session=b;this.config=c;this.hash_static=d;this.type={role:{SUPER_ADMIN:"Super administrator",STAFF:"Staff",USER:"User"}};this.events={ac_users:new pe};this.session.ie=digaku.Cb();this.session.user?(this.session.user.url=function(a){return digaku.baseurl+"/u/"+b.user.name+a},a=new uc(digaku.baseurl+"/sys/user/autocomplete"),a.send({user_id:this.session.user.id,limit:1E3},
function(a){var b,c,d;digaku.session.ac_users=a;digaku.session.ac_channels=[];d=digaku.session.user.channels;for(b=0,c=d.length;b<c;b++)a=d[b],digaku.session.ac_channels.push(a.name);digaku.events.ac_users.triggerReady()},i,"ac_users")):window.dgapp={dispatchEvent:function(){return k},loadUserInstalledApps:function(){return k}};if(this.session.user)return dg.user.Vd(function(a){var b,c,d,m;c=a.result.notifications;for(b=0,m=c.length;b<m;b++)d=c[b],c[b].message=Z.compileNotification(d);dg.ui.Ob("NotificationOuter",
la.ee,{notifications:c});for(b=0,m=c.length;b<m;b++)d=c[b],dg.fe.se.push(d);dg.ui.Ob("RequestMenuPlaceholder",la.je,{count:a.result.invitations.length+a.result.ch_own_requests.length});dg.ui.Ob("RequestFrame",la.ke,a.result);return k}),k};
digaku.Cb=function(){var a;a=window.location.href.split("#");if(0===a.length)return k;digaku.Ya=k;a=a[1];if(!a)return k;digaku.Ya=a.q("!/post/")?dg.history.V.Jd:a.q("!/pm/")?dg.history.V.Id:a.q("!/search")?dg.history.V.Hd:a.q("!/app/")?dg.history.V.Bd:a.q("!/messages")?dg.history.V.Md:a.q("!/notifications")?dg.history.V.Fd:dg.history.V.Ld;return digaku.Ya};digaku.Nc=function(){return digaku.Ya};
digaku.Td=function(){var a;a=window.location.href.split("#");if(0===a.length)return k;a=a[1].split("/");return 0===a.length?k:a[2]};digaku.s=function(){var a;if(!this.history)return k;a=this.history.s();return""===a?k:a};digaku.Ka=function(a){return this.history.Ka(a)};digaku.ad=function(){return new $d};digaku.Sb=function(a){$c(this.history);return V(this.history,"navigate",a)};digaku.Rb=function(a){return he(this.history,a)};
digaku.Tc=function(){var a;a=window.location.origin+window.location.pathname;window.location.origin||(a=window.location.href.split("#")[0]);a===digaku.baseurl&&digaku.s()===k&&(window.location="#!/home");a.ab("/")&&(a=a.substr(0,a.length-1));digaku.Sb(function(a){""===a.vd?window.location.href.ab("#")?dg.history.pd():log.debug("no token, setPageState ignored"):dg.history.pd()});digaku.Rb(j);2>window.location.hash.length&&(window.pages||(window.pages={}),window.pages.default_token||(window.pages.default_token=
"/"),digaku.Ka(window.pages.default_token));return dg.Od.Nd()};digaku.bd=function(){var a;a=new aa.ui.qc;a.qe("Mindtalk");a.pe("<h2>Not implemented yet</h2><p>Please be patient.</p>");a.oe(aa.ui.qc.Dd.Gd);return a.re(j)};digaku.n=[];
qe=function(){function a(a){this.ua=a||{show_loading:j};this.ua.show_loading&&dg.ui.ia(j)}a.prototype.get=function(a,c,d,e){var f,h;d==k&&(d="json");e==k&&(e=o());f=this.ua;if(!f.no_limit&&-1<digaku.n.indexOf(a))return this.ua.show_loading&&dg.ui.ia(n),log.warn("current ajax in progress: "+a);c||(c=o());f.de||digaku.n.push(a);h=new Dd;h.headers.set("Ajax-Request","1");V(h,"success",function(){f.no_limit||digaku.n.splice(digaku.n.indexOf(a),1);dg.ui.ia(n);if(Od(h))return"json"===d?prod.od(function(){return c(Qd(h))}):
prod.od(function(){return c(Pd(h))});try{return c(k,h.A,Rd(h))}catch(e){return log.error(e)}});V(h,"error",function(){f.no_limit||digaku.n.splice(digaku.n.indexOf(a),1);return c(k,h.A,Rd(h))});f.no_timeout||(h.ja=Math.max(0,6E4));return h.send(a,"GET")};a.prototype.nd=function(a,c,d,e,f,h){var l,m,q;f==k&&(f=k);h==k&&(h=k);l=this.ua;if(!l.no_limit&&-1<digaku.n.indexOf(a))return this.ua.show_loading&&dg.ui.ia(n),log.warn("current ajax in progress: "+a);e||(e="json");h||(h=this);f||(f=o());d||(d=o());
l.no_limit||digaku.n.push(a);m=new Dd;m.headers.set("Ajax-Request","1");c=zb(new I(c));q=function(){var c;dg.ui.ia(n);if(!l.no_limit&&(c=digaku.n.indexOf(a),-1<c))return digaku.n.splice(c,1)};Wc(m,"success",function(a){q();if(Od(m))if("json"===e)if(digaku.config.Hb===j)d.call(h,Qd(m));else try{d.call(h,Qd(m))}catch(b){log.error(b),f.call(h,b)}else if(digaku.config.Hb===j)d.call(h,Pd(m));else try{d.call(h,Pd(m))}catch(c){log.error(a),f.call(h,a)}else if(digaku.config.Hb===j)d.call(h,k,m.A,Rd(m));else try{d.call(h,
k,m.A,Rd(m))}catch(l){log.error(l),f.call(h,l)}});Wc(m,"error",function(a){q();return f.call(h,a)});V(m,"timeout",q);V(m,"abort",q);l.no_timeout||(m.ja=Math.max(0,6E4));return m.send(a,"POST",c.toString())};return a}();
digaku.zc=function(a,b,c,d){var e;d==k&&(d={});c==k&&(c=o());"object"===typeof b?(e={},d=$.extend(e,{show_loading:n,data_type:"json",opt_this:this},d)):"function"===typeof b?(d={},c=b):g(Error("Invalid params typeof `"+typeof b+"`"));return(new digaku.Cd(d)).nd(digaku.baseurl+a,b,c,d.data_type,d.on_error,d.opt_this)};digaku.Ra=digaku.Ra||{};digaku.Ra.Ac=function(){return 0<digaku.n.length};p=String.prototype;p.q=function(a){var b;return(b=this.match(RegExp("^"+a)))&&0<b.length?b[0]===a:n};
p.ab=function(a){var b;return(b=this.match(RegExp(a+"$")))&&0<b.length?b[0]===a:n};p.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")};p.title=function(){return 0<this.length?this.slice(0,1).toUpperCase()+this.slice(1,this.length-1):this};p.ud=function(){return"true"===this.toLowerCase().trim()};Array.indexOf||(Array.prototype.indexOf=function(a){var b,c,d;for(b=0,d=this.length;b<d;b++)if(c=this[b],c===a)return b;return-1},C("Array.prototype.indexOf",Array.prototype.indexOf));
C("goog.getCssName",function(a,b){var c;c=function(a){return a};return b?a+"-"+c(b):c(a)});C("digaku.init",digaku.D);C("digaku.getPagePos",digaku.Cb);C("digaku.getCurrentPagePos",digaku.Nc);C("digaku.getToken",digaku.s);C("digaku.setToken",digaku.Ka);C("digaku.newHistory",digaku.ad);C("digaku.setHistoryListener",digaku.Sb);C("digaku.notImplementedYet",digaku.bd);C("digaku.ajaxPost",digaku.zc);C("digaku.ajax.any_running_ajax_request",digaku.Ra.Ac);C("String.prototype.startsWith",String.prototype.q);
C("String.prototype.endsWith",String.prototype.ab);C("String.prototype.trim",String.prototype.trim);C("String.prototype.title",String.prototype.title);C("String.prototype.toBool",String.prototype.ud);C("digaku.Ajax",qe);C("digaku.setEnableHistory",digaku.Rb);C("digaku.initHistoryHandler",digaku.Tc);var soy=soy||{},re=navigator.userAgent,se=0==re.indexOf("Opera");soy.rc=se;soy.Ca=!se&&-1!=re.indexOf("MSIE");soy.sc=!se&&-1!=re.indexOf("WebKit");
function E(a,b){this.k=soy.Ca?[]:"";a!=k&&this.append.apply(this,arguments)}E.prototype.Ta=0;E.prototype.append=function(a,b,c){if(soy.Ca)b==k?this.k[this.Ta++]=a:(this.k.push.apply(this.k,arguments),this.Ta=this.k.length);else if(this.k+=a,b!=k)for(var d=1;d<arguments.length;d++)this.k+=arguments[d];return this};E.prototype.clear=function(){soy.Ca?this.Ta=this.k.length=0:this.k=""};E.prototype.toString=function(){if(soy.Ca){var a=this.k.join("");this.clear();a&&this.append(a);return a}return this.k};
soy.renderElement=function(a,b,c){a.innerHTML=b(c)};soy.renderAsFragment=function(a,b){var c=document.createElement("div");c.innerHTML=a(b);if(1==c.childNodes.length)return c.firstChild;for(var d=document.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d};soy.$$augmentData=function(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d};
soy.$$escapeHtml=function(a){a=""+a;if(!te.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ue,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ve,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ye,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ze,"&quot;"));return a};var te=/[&<>\"]/,ue=/&/g,ve=/</g,ye=/>/g,ze=/\"/g;soy.$$escapeJs=function(a){for(var a=""+a,b=[],c=0;c<a.length;c++)b[c]=soy.$$escapeChar(a.charAt(c));return b.join("")};soy.oc=soy.$$escapeJs;
soy.$$escapeChar=function(a){if(a in soy.Pa)return soy.Pa[a];var b=a,c=a.charCodeAt(0);if(31<c&&127>c)b=a;else{if(256>c){if(b="\\x",16>c||256<c)b+="0"}else b="\\u",4096>c&&(b+="0");b+=c.toString(16).toUpperCase()}return soy.Pa[a]=b};soy.Pa={"\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"'":"\\'","\\":"\\\\"};soy.$$escapeUri=function(a){a=""+a;return soy.ac.test(a)?a:encodeURIComponent(a)};soy.ac=/^[a-zA-Z0-9\-_.!~*'()]*$/;
soy.$$insertWordBreaks=function(a,b){for(var a=""+a,c=[],d=0,e=n,f=n,h=0,l=0,m=0,q=a.length;m<q;++m){var v=a.charCodeAt(m);h>=b&&v!=Ae&&(c[d++]=a.substring(l,m),l=m,c[d++]=soy.tc,h=0);if(e)v==Be&&(e=n);else if(f)switch(v){case Ce:f=n;++h;break;case De:f=n;e=j;break;case Ae:f=n,h=0}else switch(v){case De:e=j;break;case Ee:f=j;break;case Ae:h=0;break;default:++h}}c[d++]=a.substring(l);return c.join("")};var Ae=32,Ee=38,Ce=59,De=60,Be=62;soy.tc=soy.sc?"<wbr></wbr>":soy.rc?"&shy;":"<wbr>";
soy.$$changeNewlineToBr=function(a){a=""+a;return!soy.$b.test(a)?a:a.replace(/(\r\n|\r|\n)/g,"<br>")};soy.$b=/[\r\n]/;soy.$$bidiTextDir=function(a,b){a=soy.$$bidiStripHtmlIfNecessary_(a,b);return!a?0:soy.cc(a)?-1:1};soy.$$bidiDirAttr=function(a,b,c){b=soy.$$bidiTextDir(b,c);return b!=a?0>b?"dir=rtl":0<b?"dir=ltr":"":""};soy.$$bidiMarkAfter=function(a,b,c){var d=soy.$$bidiTextDir(b,c);return soy.$$bidiMarkAfterKnownDir(a,d,b,c)};
soy.$$bidiMarkAfterKnownDir=function(a,b,c,d){return 0<a&&(0>b||soy.fc(c,d))?"\u200e":0>a&&(0<b||soy.dc(c,d))?"\u200f":""};soy.$$bidiStripHtmlIfNecessary_=function(a,b){return b?a.replace(soy.Zb," "):a};soy.Zb=/<[^>]*>|&[^;]+;/g;soy.zd=function(a,b){var b=""+b,c=soy.$$bidiTextDir(b,j),d=soy.$$bidiMarkAfterKnownDir(a,c,b,j);0<c&&0>=a?b="<span dir=ltr>"+b+"</span>":0>c&&0<=a&&(b="<span dir=rtl>"+b+"</span>");return b+d};
soy.Ad=function(a,b){var b=""+b,c=soy.$$bidiTextDir(b,j),d=soy.$$bidiMarkAfterKnownDir(a,c,b,j);0<c&&0>=a?b="\u202a"+b+"\u202c":0>c&&0<=a&&(b="\u202b"+b+"\u202c");return b+d};soy.Na="A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff";soy.ic="\x00- !-@[-`{-\u00bf\u00d7\u00f7\u02b9-\u02ff\u2000-\u2bff";soy.Oa="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc";soy.lc=RegExp("^[^"+soy.Na+"]*["+soy.Oa+"]");soy.jc=RegExp("^["+soy.ic+"]*$|^http://");
soy.gc=function(a){return soy.lc.test(a)};soy.ec=function(a){return soy.jc.test(a)};soy.kc=0.4;soy.nc=function(a){for(var b=0,c=0,a=a.split(" "),d=0;d<a.length;d++)soy.gc(a[d])?(b++,c++):soy.ec(a[d])||c++;return 0==c?0:b/c};soy.cc=function(a){return soy.nc(a)>soy.kc};soy.hc=RegExp("["+soy.Na+"][^"+soy.Oa+"]*$");soy.mc=RegExp("["+soy.Oa+"][^"+soy.Na+"]*$");soy.dc=function(a,b){a=soy.$$bidiStripHtmlIfNecessary_(a,b);return soy.hc.test(a)};
soy.fc=function(a,b){a=soy.$$bidiStripHtmlIfNecessary_(a,b);return soy.mc.test(a)};soy.$$TStoDate=function(a){return new Date(1E3*a)};soy.uc={usd:"USD $",idr:"Rp.",eur:"&euro;",jpy:"&yen;"};soy.$$CurrencyToSymbol=function(a){rv=soy.uc[a.toLowerCase()];if("undefined"===typeof rv||!rv)rv=a;return rv};soy.$$FormatNumber=function(a){nStr=a+"";x=nStr.split(".");x1=x[0];x2=1<x.length?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1.$2");return x1+x2};
soy.bc=function(a,b){rv=a;a.length>b&&(rv=rv.slice(0,b)+"...");return rv};C("soy",soy);C("soy.StringBuilder",E);C("soy.renderElement",soy.renderElement);C("soy.renderAsFragment",soy.renderAsFragment);C("soy.$$augmentData",soy.$$augmentData);C("soy.$$escapeHtml",soy.$$escapeHtml);C("soy.$$escapeJs",soy.$$escapeJs);C("soy.$$escapeJsString",soy.oc);C("soy.$$escapeChar",soy.$$escapeChar);C("soy.$$escapeUri",soy.$$escapeUri);C("soy.$$insertWordBreaks",soy.$$insertWordBreaks);
C("soy.$$changeNewlineToBr",soy.$$changeNewlineToBr);C("soy.$$TStoDate",soy.$$TStoDate);C("soy.$$CurrencyToSymbol",soy.$$CurrencyToSymbol);C("soy.$$FormatNumber",soy.$$FormatNumber);C("soy.$$ShortText",soy.bc);var Fe,Ge,He,Ie,Je,Ke=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},Z={};C("dg.MsgCompiler",Z);Ie=RegExp("https?\\:\\/\\/.*\\.(jpg|png|jpeg|gif|bmp|ico)(\\?.*)?","gi");
He=RegExp("https?\\:\\/\\/(?!(?:www.)?4shared).*\\.(mp3|ogg|wav)(\\?.*)?","gi");Fe=document.createElement("audio");
Z.J={vb:RegExp("https?\\://(www\\.)?youtube\\.com/watch\\?v=([a-zA-Z_0-9\\-]+)(&amp;feature=.+)?","gi"),ub:RegExp("https?\\://(www\\.)?youtu\\.be/([a-zA-Z_0-9\\-]+)","gi"),tb:RegExp("http\\://(wwww\\.)?vimeo\\.com/(\\d+)","g"),yd:function(a,b){var c;c=a;"Article"===b.kind?(c=c.replace(Z.J.vb,na({code:"$2",width:"400",height:"300"})),c=c.replace(Z.J.ub,na({code:"$2",width:"400",height:"300"}))):(c=c.replace(Z.J.vb,na({code:"$2",width:"300",height:"250"})),c=c.replace(Z.J.ub,na({code:"$2",width:"300",
height:"250"})));return c},wd:function(a,b){var c;c=a;return c="Article"===b.kind?c.replace(Z.J.tb,ma({code:"$2",width:"400",height:"350"})):c.replace(Z.J.tb,ma({code:"$2",width:"300",height:"250"}))},all:function(a,b){var c;c=this.yd(a,b);return c=this.wd(c,b)}};Z.lb=k;Z.Jb=k;
Z.compileLink=function(a,b){var c,d,e,f,h,l,m,q,v,s,L,B,La;Z.lb===k&&(Z.lb=RegExp("\\b(?:https?\\://|www).[^\\s\\[\\]\"']+","gim"),Z.Jb=RegExp("([\\]\\(\\)\\.\\,\\-\\|#@\\^\\&\\%\\*\\+\\=\\?\\{\\}\\!~`]|\\!\\[)(?:https?\\://|www).[^\\s\\[\\]\"']+","gim"));h=[];q=a;La=a.split("\n");for(v=0,L=La.length;v<L;v++)if(f=La[v],!f.q("    ")&&(f=f.replace(Z.Jb,""),(f=f.match(Z.lb))&&0!==f.length)){f=Ja(f,function(a){a=a.trim();return 4<a.length&&a.match(/[%\(\)\+\-\w\/_\.\s]$/)});f=Ka(f,function(a){return a.trim()});
Sa(f);for(s=0,B=f.length;s<B;s++)if(e=f[s],e=e.replace(/^\s|\s$/g,""),c=e.match(Ie))-1<h.indexOf(c[0])||(h.push(c[0]),e=RegExp(Z.escape(c[0]),"g"),q="Article"!==b?q.replace(e,c[0].replace(/(.*)/,'<div class="photo-wrap"><img src="$1" class="post-img" title="$1" /></div>')):q.replace(e,c[0].replace(/(.*)/,'<div class="photo-wrap"><a href="$1" target="_blank"><img src="$1" style="cursor: pointer; max-width: 100%; max-height: 400px;" title="$1" /></a></div>')));else if(c=e.match(He)){if(!(-1<h.indexOf(c[0]))){h.push(c[0]);
e=RegExp(Z.escape(c[0]),"g");m='<object type="application/x-shockwave-flash" width="200" height="35" style="vertical-align:middle; display: block" data="'+digaku.baseurl+'/media/mp3player.swf?&amp;mp3=$1" ><param name="movie" value="'+digaku.baseurl+'/media/mp3player.swf" /><param name="FlashVars" value="mp3=$1"><param name="wmode" value="opaque"></object>';l='<audio controls="controls" style="display: block; margin-top: 10px"><source src="$1" type="audio/$2">'+m+"</audio>";if(-1!==c[0].indexOf(".mp3")&&
(d=Fe.canPlayType("audio/mpeg"),""===d||"maybe"===d))l=m;q=q.replace(e,c[0].replace(/(.*\.(mp3|ogg|wav))/i,l))}}else l=e.replace(/\b((?:https?\:\/\/|www\.)(.*))/gi,function(a,b,c){if(-1<h.indexOf(a))return"";h.push(a);a.q("http")===n&&(a="http://"+a);c=Y.Ub(a,{attrs:["fragment"]});a=a.trim();return'<a href="'+a+'" target="_blank">'+c+"</a>"}),e=Z.escape(e)+"(?!\"|'|<|/)",e=RegExp(e,"i"),q=q.replace(e,l)}return q};Je=RegExp("\\B@([a-zA-Z0-9\\.\\-\\_]+)\\b","gi");
Z.compileNickName=function(a){return a.replace(Je,'@<a href="'+digaku.baseurl+'/u/$1" user_hover_nickname="1" rel="$1">$1</a>',"gi")};Ge=RegExp("(^|\\s)#[a-z0-9\\.\\-_][^\\s]+","gi");
Z.compileChannel=function(a){var b,c,d,e,f;b=a.match(Ge);d=a;if(!b||0===b.length)return d;b=Ka(b,function(a){return a.replace(/\W*$/,"").trim()});Ta(b,function(a,b){return a.length>b.length?-1:a.length<b.length?1:0});for(e=0,f=b.length;e<f;e++)a=b[e],c=a.replace(/(^|\s)#([a-z0-9\.\-_]*)/gi,'<a href="'+digaku.baseurl+'/ch/$2" class="channel-name">#$2</a>'),d=d.replace(RegExp(Z.escape(a)+"\\b","g"),c);return d};
Z.vc=[["\\B:D\\b","grin.gif",":D"],["\\B:)\\B","smile.gif",":)"],["\\B;)\\B","wink.gif",";)"],["\\B(:\\B","shy.gif","(:"],["\\B:lol\\b","laugh.gif",":lol"],["\\B:hmmm\\b","think.gif",":hmmm"],["\\B:mboh\\b","whistle.gif",":mboh"],["\\bb)\\B","cool.gif","b)"],["\\B:hammer\\b","hammer.gif",":hammer"],["\\B:beer\\b","beer.gif",":beer"],["\\B:(\\B","sad.gif",":("],["\\B:o\\b","twitch.gif",":o"],["\\B:wow\\b","woot.gif",":wow"],["\\B:sip\\b","sip.gif",":sip"],["\\B:P\\b","tongue.gif",":P"],["\\B:eh\\b",
"eh.gif",":eh"],["\\B:hehe\\b","ehehe.gif",":hehe"],["\\B:mad\\b","mad.gif",":mad"],["\\B:jogetpisang\\b","bananaheadbanger.gif",":jogetpisang"],["\\B:bye\\b","cry.gif",":bye"],["\\B:-X\\b","angry.gif",":-X"],["\\B:-{\\B","confuse.gif",":-{"],["\\B:kiss\\b","kiss.gif",":kiss"],["\\B:sick\\b","sick.gif",":sick"],["\\B:love\\b","love.gif",":love"],["\\B:zzz\\b","sleepy.gif",":zzz"],["\\B;P\\b","xtongue.gif",";P"],["\\B=pray\\b","pray.gif","=pray"],["\\B;drool\\b","drool.gif",";drool"],["\\B:spam\\b",
"spam.gif",":spam"],["\\B:86\\b","86.gif",":86"],["\\B:pray\\b","pray.gif",":pray"],["\\B:bauble\\b","christmas/bauble.png",":bauble"],["\\B:bell\\b","christmas/bell.png",":bell"],["\\B:elf\\b","christmas/elf.png",":elf"],["\\B:gift\\b","christmas/gift.png",":gift"],["\\B:ribbon\\b","christmas/ribbon.png",":ribbon"],["\\B:snowman\\b","christmas/snowman.png",":snowman"],["\\B:brandy\\b","christmas/brandy.png",":brandy"],["\\B:gingerbread\\b","christmas/gingerbread.png",":gingerbread"],["\\B:star\\b",
"christmas/star.png",":star"],["\\B:candle\\b","christmas/candle.png",":candle"],["\\B:holly\\b","christmas/holly.png",":holly"],["\\B:stocking\\b","christmas/stocking.png",":stocking"],["\\B:cane\\b","christmas/cane.png",":cane"],["\\B:light\\b","christmas/light.png",":light"],["\\B:tree\\b","christmas/tree.png",":tree"],["\\B:cracker\\b","christmas/cracker.png",":cracker"],["\\B:nutcracker\\b","christmas/nutcracker.png",":nutcracker"],["\\B:wreath\\b","christmas/wreath.png",":wreath"],["\\B:drum\\b",
"christmas/drum.png",":drum"],["\\B:pudding\\b","christmas/pudding.png",":pudding"],["\\B:2012\\b","newyear/2012.gif",":2012"],["\\B:balon\\b","newyear/balon.gif",":balon"],["\\B:bir\\b","newyear/bir.gif",":bir"],["\\B:kembangapi\\b","newyear/kembang-api.gif",":kembangapi"],["\\B:party\\b","newyear/party.gif",":party"],["\\B:tonet\\b","newyear/tonet.gif",":tonet"],["\\B:trompet\\b","newyear/trompet.gif",":trompet"],["\\B:topi\\b","newyear/topi.gif",":topi"],["\\B:wine\\b","newyear/wine.gif",":wine"],
["\\B:ampau\\b","imlek/ampau.png",":ampau"],["\\B:barongsai\\b","imlek/barongsai.png",":barongsai"],["\\B:coin\\b","imlek/coin.png",":coin"],["\\B:jeruk\\b","imlek/jeruk.png",":jeruk"],["\\B:lampion\\b","imlek/lampion.png",":lampion"],["\\B:paipai\\b","imlek/paipai.png",":paipai"],["\\B:petasan\\b","imlek/petasan.png",":petasan"],["\\B:qipau\\b","imlek/qipau.png",":qipau"],["\\B:topipai\\b","imlek/topipai.png",":topipai"]];
Z.escape=function(a){return a.replace(/([\[\]\*\=\?\^\$\.\:\(\)\-\+\#])/g,"\\$1")};Z.compileEmo=function(a){var b,c,d,e,f;d=function(a){Ia(Z.vc,function(b){var c;c=Z.escape(b[0]);return a=a.replace(RegExp(c,"gi"),'<img src="'+digaku.baseurl+"/img/emoticons/mt/"+b[1]+'" title="'+b[2]+'" />')});return a};c=[];f=a.split("\n");for(a=0,e=f.length;a<e;a++)b=f[a],b.match(/^\s{4}/)||(b=d(b)),c.push(b);return c.join("\n")};Z.qd=RegExp("\\[\\[\\[([\\s\\S]*?)\\]\\]\\]","mig");
Z.Xa=RegExp("\\{\\{\\{([\\s\\S]*?)\\}\\}\\}","mig");
Z.compileDGcode=function(a){a=a.replace(Z.qd,function(a,c){var d={id:"spoiler-"+Y.eb(),content:c},e=new E;e.append("<div ",d!=k?d.id?'id="'+d.id+'"':"":"",' class="',"spoiler"," ",d!=k&&d.Mc&&d.Mc==j?"expanded":"collapsed",'"><div class="',"spoiler-title",'" onclick="dg.ui.showSpoiler(\'',d!=k&&d.id?d.id:"",'\');">Splash</div><div class="',"content",'">',d.content,"</div></div>");return e.toString()});a=a.replace(Z.Xa,function(a,c){var d=new E;d.append("<pre><code>",c,"</code></pre>");return d.toString()});
return a=a.replace(RegExp("\\[img\\]([\\s\\S]*?)\\[/img\\]","mig"),function(a,c){var d=new E;d.append('<div class="photo-wrap">','<a href="'+soy.$$escapeHtml(c)+'" target="_blank">','<img src="',soy.$$escapeHtml(c),'"',c?' title="'+soy.$$escapeHtml(c)+'"':"",'style="max-width: 300px; max-height: 200px;"',"/>","</a>","</div>");return d.toString()})};
Z.compileAll=function(a,b,c){var d,e,f,h,l;c==k&&(c={});if(!a)return"";e=a;Ea(c,"escape_html",j);window.dgapp&&(c=window.dgapp.dispatchEvent("onCompileMessageBegin",e))&&(e=c);a=e.match(Z.Xa,"g");c={};if(a)for(h=0,l=a.length;h<l;h++)d=a[h],f="[:code-saved-msgs]"+Y.eb()+"[/:code-saved-msg:]",c[f]=d.replace(Z.Xa,function(a,b){return"{{{"+b.trim()+"}}}"}),e=e.replace(d,f);if("ArticleShortDesc"===b)return e=e.replace(/[=\-][=\-]+/g,". ");d=["Article","Response"];0<=Ke.call(d,b)&&(e=Z.J.all(e,{kind:b}));
e=Z.compileLink(e,b);e=Z.compileNickName(e);e=Z.compileChannel(e);e=Z.compileEmo(e);"Notification"===b&&(e=Z.compileNotification({message:e}));if(0<=Ke.call(d,b)){e=Z.compileMD(e);e=e.replace(/\n+/,"\n\n");if(a)for(f in c)a=c[f],e=e.replace(f,a);e=Z.compileDGcode(e)}else if(a)for(f in c)a=c[f],e=e.replace(f,a);window.dgapp&&(c=window.dgapp.dispatchEvent("onCompileMessageEnds",e))&&(e=c);return e};Z.compileMD=function(a){return(new Td.Hc).Yc(a)};
Z.compileNotification=function(a){var b,c,d,e,f,h,l,m,q;m=a.message;if(h=m.match(RegExp("\\$\\[(user|whisper|post|post\\-response|he|invitation|whisper\\-response)\\:.*?\\]","mig"))){c={};for(d=0,q=h.length;d<q;d++)switch(f=h[d],e=f.slice(2,f.search(":")),e){case "user":c[f]=f.replace(/\$\[user\:.*?;(.*?)\]/i,'<strong style="font-size: 13px;"><a href="'+digaku.baseurl+'/u/$1">$1</a></strong>');break;case "post":(b=f.match(/\$\[post\:([a-f0-9]+?);[a-f0-9]+?;[a-zA-Z0-9_\.\-]+?;([a-zA-Z0-9_\.\-]+?)\]/))&&
(c[f]="PrivateMessage"===b[2]?'<a href="#!/pm/'+b[1]+"?"+a.id+'">whisper</a>':'<a href="#!/post/'+b[1]+"?"+a.id+'">post</a>');break;case "whisper":c[f]=f.replace(/\$\[whisper\:([a-f0-9]+)\]/,'<a href="#!/pm/$1?'+a.id+'">whisper</a>');break;case "he":b=f.match(/\$\[he\:([a-f0-9]+)\]/);l="his/her";"1"===b[1]?l="his":"0"===b[1]&&(l="her");c[f]=l;break;case "post-response":c[f]=f.replace(/\$\[post\-response\:[a-f0-9]+?;[a-zA-Z]+?;([a-f0-9]+)\]/,'<a href="#!/post/$1?'+a.id+'">response</a>');break;case "whisper-response":c[f]=
f.replace(/\$\[whisper\-response\:[a-f0-9]+?;[a-zA-Z]+?;([a-f0-9]+)\]/,'<a href="#!/pm/$1?'+a.id+'">whisper response</a>');break;case "invitation":c[f]='<a href="#!/requests">Requests</a>'}for(e in c)a=c[e],c.hasOwnProperty(e)&&(m=m.replace(e,a));return m}};C("dg.MsgCompiler.compileLink",Z.compileLink);C("dg.MsgCompiler.compileNickName",Z.compileNickName);C("dg.MsgCompiler.compileChannel",Z.compileChannel);C("dg.MsgCompiler.escape",Z.escape);C("dg.MsgCompiler.compileEmo",Z.compileEmo);
C("dg.MsgCompiler.compileDGcode",Z.compileDGcode);C("dg.MsgCompiler.compileAll",Z.compileAll);C("dg.MsgCompiler.compileMD",Z.compileMD);C("dg.MsgCompiler.compileNotification",Z.compileNotification);
